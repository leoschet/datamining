<!DOCTYPE html><html lang="en" class="no-js">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-MC35ML');</script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Unity - Manual: Managed bytecode stripping with IL2CPP</title>
<meta name="description" content="The Unity Manual helps you learn and use the Unity engine. With the Unity engine you can create 2D and 3D games, apps and experiences.">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="../StaticFilesManual/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFilesManual/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFilesManual/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFilesManual/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFilesManual/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFilesManual/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFilesManual/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFilesManual/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFilesManual/images/favicons/tileicon-144x144.png">
<script type="text/javascript" src="../StaticFilesManual/js/jquery.js?ts=1503756017"></script><script type="text/javascript" src="../StaticFilesManual/js/core.js?ts=1503756017"></script><script type="text/javascript" src="docdata/toc.js?ts=1503756017"></script><script type="text/javascript" src="docdata/global_toc.js?ts=1503756017"></script><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700,400italic" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="../StaticFilesManual/css/core.css?ts=1503756017">
</head>
<body>
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MC35ML" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div class="logo"><a href="https://docs.unity3d.com"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul>
<li><a href="../Manual/index.html" class="selected">Manual</a></li>
<li><a href="../ScriptReference/index.html">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity3d.com/">unity3d.com</a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="version-number">Version: <b>2017.1</b> (<a href="https://docs.unity3d.com/2017.2/Documentation/Manual">switch to 2017.2b</a>)</div>
<div class="lang-switcher">
<div class="current toggle" data-target=".lang-list">
<div class="lbl">Language: <span class="b">English</span>
</div>
<div class="arrow"></div>
</div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/IL2CPP-BytecodeStripping.html">English</a></li>
<li><a href="/ja/current/Manual/IL2CPP-BytecodeStripping.html">日本語</a></li>
<li><a href="/es/current/Manual/IL2CPP-BytecodeStripping.html">Español</a></li>
<li><a href="/kr/current/Manual/IL2CPP-BytecodeStripping.html">한국어</a></li>
<li><a href="/ru/current/Manual/IL2CPP-BytecodeStripping.html">Русский</a></li>
</ul></div>
</div>
</div></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc"><h2>Unity Manual</h2></div></div></div></div></div>
<div id="content-wrap" class="content-wrap"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html">Unity User Manual (2017.1)</a></li>
<li><a href="ScriptingSection.html">Scripting</a></li>
<li><a href="ScriptingTools.html">Scripting Tools</a></li>
<li><a href="IL2CPP.html">IL2CPP</a></li>
<li>Managed bytecode stripping with IL2CPP</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="IL2CPP-OptimizingBuildTimes.html"></a></span><div class="tip"> Optimizing IL2CPP build times</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="EventSystem.html"></a></span><div class="tip">Event System</div>
</div>
</div></div>
<div class="otherversionswrapper" onmouseover="setOtherVersionsDisplay(true)" onmouseout="setOtherVersionsDisplay(false)">
<a>Other Versions</a><div class="otherversionscontent" id="OtherVersionsContent" style="display: none;">Cannot access other versions offline!</div>
</div>
<h1>Managed bytecode stripping with IL2CPP</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>Managed byte code stripping is always enabled when the <a href="IL2CPP.html">IL2CPP</a> scripting backend is used. In this case, the Stripping Level option is replaced with an Boolean option named Strip Engine Code. If this option is enabled, unused modules and classes in the Unity Engine code will be removed. If it is disabled, all of the modules and classes in the Unity Engine code will be preserved.</p>

<p>The link.xml file (described below) can be used to effectively disable bytecode stripping by preserving both types and full assemblies. For example, to prevent the System assembly from being stripped, the following link.xml file can be used:</p>

<pre><code>&lt;linker&gt;
       &lt;assembly fullname=&quot;System&quot; preserve=&quot;all&quot;/&gt;
&lt;/linker&gt;
</code></pre>

<h2>Tips</h2>

<h3>How to deal with stripping when using reflection</h3>

<p>Stripping depends highly on static code analysis and sometimes this can’t be done effectively, especially when dynamic features like reflection are used. In such cases, it is necessary to give some hints as to which classes shouldn’t be touched. Unity supports a per-project custom stripping blacklist. Using the blacklist is a simple matter of creating a link.xml file and placing it into the Assets folder (or any subdirectory of Assets). An example of the contents of the link.xml file follows. Classes marked for preservation will not be affected by stripping:</p>

<pre><code>&lt;linker&gt;
       &lt;assembly fullname=&quot;System.Web.Services&quot;&gt;
               &lt;type fullname=&quot;System.Web.Services.Protocols.SoapTypeStubInfo&quot; preserve=&quot;all&quot;/&gt;
               &lt;type fullname=&quot;System.Web.Services.Configuration.WebServicesConfigurationSectionHandler&quot; preserve=&quot;all&quot;/&gt;
       &lt;/assembly&gt;

       &lt;assembly fullname=&quot;System&quot;&gt;
               &lt;type fullname=&quot;System.Net.Configuration.WebRequestModuleHandler&quot; preserve=&quot;all&quot;/&gt;
               &lt;type fullname=&quot;System.Net.HttpRequestCreator&quot; preserve=&quot;all&quot;/&gt;
               &lt;type fullname=&quot;System.Net.FileWebRequestCreator&quot; preserve=&quot;all&quot;/&gt;
       &lt;/assembly&gt;

       &lt;assembly fullname=&quot;mscorlib&quot;&gt;
               &lt;type fullname=&quot;System.AppDomain&quot; preserve=&quot;fields&quot;/&gt;
               &lt;type fullname=&quot;System.InvalidOperationException&quot; preserve=&quot;fields&quot;&gt;
                       &lt;method signature=&quot;System.Void .ctor()&quot;/&gt;
               &lt;/type&gt;
               &lt;type fullname=&quot;System.Object&quot; preserve=&quot;nothing&quot;&gt;
                      &lt;method name=&quot;Finalize&quot;/&gt;
               &lt;/type&gt;
       &lt;/assembly&gt;
&lt;/linker&gt;
</code></pre>

<p>A project can include multiple link.xml files. Each link.xml file can specify a number of different options.
The assembly element indicates the managed assembly where the nested directives should apply.</p>

<p>The type element is used to indicate how a specific type should be handled. It must be a child of the assembly element. The fullname attribute can accept the ‘*’ wild card to match one or more characters.</p>

<p>The preserve attribute can take on one of three values:</p>

<ul>
<li>all: Keep everything from the given type (or assembly, for IL2CPP only).</li>
<li>fields: Keep only the fields of the given type.</li>
<li>nothing: Keep only the given type, bug none of its contents.</li>
</ul>

<p>The method element is used to indicate that a specific method should be preserved. It must be a child of the type element. The method can be specified by name or by signature.</p>

<p>The stripped assemblies are output to a directory below the Temp directory in the project (the exact location varies depending on the target platform). The original, unstripped assemblies are available in the not-stripped directory in the same location as the stripped assemblies. A tool like ILSpy can be used to inspect the stripped and unstripped assemblies to determine what parts of the code were removed.</p>

<hr>

<ul>
<li><p><span class="page-edit">2017–05–26 Page published with limited <a href="DocumentationEditorialReview.html">editorial review</a> - <a href="LeaveFeedback.html">Leave page feedback</a>
</span></p></li>
<li><p><span class="page-history">2017–05–26 - Documentation-only update in Unity User Manual for Unity 5.6</span></p></li>
</ul>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="IL2CPP-OptimizingBuildTimes.html"></a></span><div class="tip"> Optimizing IL2CPP build times</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="EventSystem.html"></a></span><div class="tip">Event System</div>
</div>
</div>
</div>
<div class="footer-wrapper"><div class="footer clear">
<div class="copy">
<user_feedback><a href="LeaveFeedback.html" target="_blank">Leave feedback</a></user_feedback><known_issues><p>Is something described here not working as you expect it to? It might be a <b>Known Issue</b>. Please check with the Issue Tracker at <a href="https://issuetracker.unity3d.com">issuetracker.unity3d.com</a>.</p></known_issues>Copyright © 2017 Unity Technologies. Publication: 2017.1-001Q. Built: 2017-08-29.</div>
<div class="menu">
<a href="https://unity3d.com/learn">Tutorials</a><a href="https://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="https://forum.unity3d.com">Forums</a><a href="https://unity3d.com/asset-store">Asset Store</a>
</div>
</div></div>
</div></div></div>
</div>
</body>
</html>
